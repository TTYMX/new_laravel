fml.define("common/ptpParams",[],function(i,e){"use strict";window.PTP_PARAMS={EnableLogMoGuJs:!1,uuid:"__mgjuuid",uid:"__ud_",platform:function(){var i=navigator.userAgent;return i.indexOf("meilishuo4android")!=-1||i.indexOf("meilishuo android")!=-1?"24":i.indexOf("meilishuo4ios")!=-1||i.indexOf("Meilishuo iPhone")!=-1?"23":/iphone|android|ipad/i.test(i)?"34":"33"},hrefRe:/http[s]?:\/\/\w+\.(meilishuo|mogujie)\.com([\/]|\/.*|)$/,mgjRe:/(meilishuo|mls):\/\//,isNativeRe:/(meilishuo|mls|mogujie)/i,nativeLog:{}}});;fml.define("common/user",[],function(t,o){"use strict";function s(){return $.ajax({url:"http://portal.meilishuo.com/api/profile/baseinfo",dataType:"jsonp"}).always(function(t){var o,s,n="";t&&t.status&&1001===t.status.code?(o=t.result,s=!1):(s=!0,n=t.status.msg),a={userInfo:o,isError:s,errMsg:n}})}var n,a;Meilishuo.global.getUserInfo=function(t){t&&"function"==typeof t||(t=function(){}),n?n.always(t):(n=s()).always(function(){t(a)})}});;fml.define("lib/trace",[],function(){(function(){"use strict";function n(){for(var n=arguments,e=arguments[0],t=arguments.length,r=1;r<t;r++){var i=n[r];for(var o in i)i.hasOwnProperty(o)&&(e[o]=i[o])}return e}function e(n){return"function"!=typeof n?n:n()}function t(n){n=n||location.href;var t=e(T.customUrl);return t?t=t.split("https://").join("").split("http://").join(""):("string"==typeof n&&(n=n.split("?")[0].split("#")[0].split("https://").join("").split("http://").join(""),"/"===n.charAt(n.length-1)&&(n=n.substr(0,n.length-1))),n)}function r(n,e,t){if("function"==typeof Array.prototype.map)return n.map(e,t);for(var r=new Array(n.length),i=0;i<n.length;i++)r[i]=e.call(t,n[i]);return r}function i(n,e,t){if("function"==typeof Array.prototype.filter)return n.filter(e,t);for(var r=[],i=0;i<n.length;i++)e.call(t,n[i])&&r.push(n[i]);return r}function o(n,e){if("function"==typeof Array.prototype.indexOf)return n.indexOf(e);for(var t=0;t<n.length;t++)if(n[t]===e)return t;return-1}function a(){var n=navigator.userAgent.toLowerCase();return/iphone|android|ipad/i.test(n)?"h5":"pc"}function s(){var n,e,t=navigator.userAgent,r="其它",i=r,o="",a="";return(n=t.indexOf("Opera"))!==-1&&(i="Opera",o=t.substring(n+6),(n=t.indexOf("Version"))!==-1&&(o=t.substring(n+8))),(n=t.indexOf("OPR"))!==-1?(i="Opera",o=t.substring(n+4)):t.indexOf("MicroMessenger")!==-1?i="Wechat":t.indexOf("QQ")!==-1?i="QQ":(n=t.indexOf("MSIE"))!==-1?(i="IE",o=t.substring(n+5)):(n=t.indexOf("Chrome"))!==-1?(i="Chrome",o=t.substring(n+7)):(n=t.indexOf("Firefox"))!==-1?(i="Firefox",o=t.substring(n+8)):t.indexOf("Trident/")!==-1?(i="IE",o=t.substring(t.indexOf("rv:")+3)):(n=t.indexOf("Safari"))===-1&&t.indexOf("iPhone")===-1||(i="Safari",o=t.substring(n+7),(n=t.indexOf("Version"))!==-1&&(o=t.substring(n+8))),(e=o.indexOf(";"))!==-1&&(o=o.substring(0,e)),(e=o.indexOf(" "))!==-1&&(o=o.substring(0,e)),(e=o.indexOf(")"))!==-1&&(o=o.substring(0,e)),o&&(a=parseInt(""+o,10),isNaN(a)&&(o=""+parseFloat(navigator.appVersion),a=parseInt(navigator.appVersion,10))),a?i+"_"+a:i+"_unknown"}function d(){var n="其它",e=n,t=navigator.userAgent,r=[{s:"Windows 10",r:/(Windows 10.0|Windows NT 10.0)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Windows Vista",r:/Windows NT 6.0/},{s:"Windows Server 2003",r:/Windows NT 5.2/},{s:"Windows XP",r:/(Windows NT 5.1|Windows XP)/},{s:"Windows 2000",r:/(Windows NT 5.0|Windows 2000)/},{s:"Windows ME",r:/(Win 9x 4.90|Windows ME)/},{s:"Windows 98",r:/(Windows 98|Win98)/},{s:"Windows 95",r:/(Windows 95|Win95|Windows_95)/},{s:"Windows NT 4.0",r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{s:"Windows CE",r:/Windows CE/},{s:"Windows 3.11",r:/Win16/},{s:"Android",r:/Android/},{s:"Open BSD",r:/OpenBSD/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"QNX",r:/QNX/},{s:"UNIX",r:/UNIX/},{s:"BeOS",r:/BeOS/},{s:"OS/2",r:/OS\/2/},{s:"Search Bot",r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}];for(var i in r){var o=r[i];if(o.r.test(t)){e=o.s;break}}var a=n;switch(/Windows/.test(e)&&(a=/Windows (.*)/.exec(e)[1],e="Windows"),e){case"Mac OS X":a="";break;case"Android":var s=/Android( |\/)([\.\_\d]+)/.exec(t);if(s&&s.length>0){var d=(s[2]||"").split(".").slice(0,2);a=d.join(".")}break;case"iOS":a=/OS (\d+)_(\d+)_?(\d+)?/.exec(t),a&&a.length>0&&(a=a[1]+"."+a[2])}return e===n?e:e+a}function f(){var n,e,t=window.screen,r="";return t&&t.width&&(n=t.width?t.width:"",e=t.height?t.height:"",r+=""+n+"x"+e),r}function c(){var n=(window.devicePixelRatio?window.devicePixelRatio:1)-0;return n.toFixed(1)}function u(){return{platform:a(),screen:f(),os:d(),browser:s(),devicePixelRatio:c()}}function p(){var n=window.performance&&window.performance.timing;if(!n)return{};var t=window[T.blankTime];t||(t=n.domContentLoadedEventStart);var r={dns:n.domainLookupEnd-n.domainLookupStart,tcp:n.connectEnd-n.connectStart,request:n.responseStart-n.requestStart,response:n.responseEnd-n.responseStart,domContentLoad:n.domContentLoadedEventEnd-n.navigationStart,blankTime:t-n.navigationStart,readyTime:n.domInteractive-n.navigationStart,onloadTime:n.loadEventEnd-n.navigationStart,extraTime:e(T.getExtraTime)||0};return r}function l(){var e=u(),r=p();r.formatUrl=t();var i=window.logger;i&&i.log&&i.log("016000001",n({},e,r))}function w(n,e,t,r){for(var i=!0,o=0;o<I.length;o++){var a=I[o]||{};if(a.msg===n&&a.file===e&&a.line===t&&a.col===r){i=!1;break}}return i}function v(n,e,r,i,o){if(w(n,e,r,i)){var a="";if(o){if(o.hasReported)return;a=o.stack||""}I.push({msg:n,file:e,line:r,col:i});var s=window.logger;s&&s.log&&s.log("016000011",{type:0,msg:n,file:e,line:r,col:i,stack:a,ua:navigator.userAgent,formatUrl:t()})}}function g(n){if(!n)return null;var e={};if("object"==typeof n?(e.msg=n.message||"",e.stack=n.stack||""):e.msg=n,e.ua=navigator.userAgent,e.type=1,"object"==typeof n&&n.stack)try{e.msg=k.parse(n)}catch(t){}return e}function m(){var n=navigator.userAgent.toLowerCase();return n.indexOf("msie")!==-1&&parseInt(n.split("msie")[1],10)}function h(n){"string"==typeof n&&(n=new Error(n)),n.hasReported||(n.hasReported=!0,A.sendMsg(n))}function y(n){return"function"!=typeof n.apply?n:function(){try{return n.apply(this,arguments)}catch(e){throw h(e),console&&console.warn&&console.warn(e),e}}}function O(n){return n&&"function"==typeof n.apply?function(){for(var e,t=arguments,r=[],i=0,o=arguments.length;i<o;i++)e=t[i],"function"==typeof e&&(e=y(t[i])),r.push(e);return n.apply(this,r)}:n}function x(n,e){for(var t in e)n[t]=e[t]}function W(){var n=window.$;if(n&&(n===window.jQuery||n===window.Zepto)){var e=n.fn.ready;n.fn.ready=O(e);var t=n.ajax;"function"==typeof t&&"function"==typeof t.apply&&(n.ajax=function(e,r){var i=null;return"undefined"==typeof r&&"object"==typeof e?i=e:"object"==typeof r&&(i=r),i&&("function"==typeof i.success&&(i.success=y(i.success)),"function"==typeof i.complete&&(i.complete=y(i.complete))),t.apply(n,arguments)});var r=n.Deferred;"function"==typeof r&&"function"==typeof r.apply&&(n.Deferred=function(){var n=r.apply(this,arguments),e=n.resolveWith;return n.resolveWith=y(e),n})}}function S(){var n=window.require,e=window.define;e&&e.amd&&n&&(window.require=O(n),x(window.require,n),window.define=O(e),x(window.define,e))}function E(){var n=window.setTimeout;window.setTimeout=function(e,t){switch("function"==typeof e&&(e=y(e)),arguments.length){case 0:return n();case 1:return n(e);default:return n(e,t)}};var e=window.setInterval;window.setInterval=O(e);var t=window.requestAnimationFrame;"function"==typeof t&&(window.requestAnimationFrame=O(t));var r=window.Promise;if("undefined"!=typeof r){var i=r.prototype.then;window.Promise.prototype.then=O(i)}if(window.EventTarget&&window.EventTarget.prototype.addEventListener){var o=window.EventTarget.prototype.addEventListener;window.EventTarget.prototype.addEventListener=function(n,e,t){return e&&"function"==typeof e.handleEvent?(e.handleEvent=y(e.handleEvent),o.call(this,n,e,t)):(e.___wrapper||(e.___wrapper=y(e)),o.call(this,n,e.___wrapper,t))};var a=window.EventTarget.prototype.removeEventListener;window.EventTarget.prototype.removeEventListener=function(n,e,t){return e?a.call(this,n,e.___wrapper||e,t):a.call(this,n,e,t)}}}var T={customUrl:function(){},getExtraTime:function(){return 0},blankTime:"__trace__headendt"},b=/^\s*at .*(\S+\:\d+|\(native\))/m,N=/^(eval@)?(\[native code\])?$/,_={parse:function(n){return n.stack&&n.stack.match(b)?this.parseV8OrIE(n):n.stack?this.parseFFOrSafari(n):[]},extractLocation:function(n){if(n.indexOf(":")===-1)return[n];var e=/(.+?)(?:\:(\d+))?(?:\:(\d+))?$/,t=e.exec(n.replace(/[\(\)]/g,""));return[t[1],t[2]||void 0,t[3]||void 0]},parseV8OrIE:function(n){var e=i(n.stack.split("\n"),function(n){return!!n.match(b)},this);return r(e,function(n){n.indexOf("(eval ")>-1&&(n=n.replace(/eval code/g,"eval").replace(/(\(eval at [^\()]*)|(\)\,.*$)/g,""));var e=n.replace(/^\s+/,"").replace(/\(eval code/g,"(").split(/\s+/).slice(1),t=this.extractLocation(e.pop()),r=e.join(" ")||void 0,i=o(["eval","<anonymous>"],t[0])>-1?void 0:t[0];return{functionName:r,filename:i,row:t[1],column:t[2],line:n}},this)},parseFFOrSafari:function(n){var e=i(n.stack.split("\n"),function(n){return!n.match(N)},this);return r(e,function(n){if(n.indexOf(" > eval")>-1&&(n=n.replace(/ line (\d+)(?: > eval line \d+)* > eval\:\d+\:\d+/g,":$1")),n.indexOf("@")===-1&&n.indexOf(":")===-1)return{functionName:n};var e=n.split("@"),t=this.extractLocation(e.pop()),r=e.join("@")||void 0;return{functionName:r,filename:t[0],row:t[1],column:t[2],line:n}},this)}},k={ErrorStackParser:_,parse:function(n){var e=_.parse(n);if(!e||e.length<=0)return n.message;var t=e[0],r=[];if(t.filename){var i=t.filename;i.lastIndexOf("/")>-1&&(i=t.filename.slice(t.filename.lastIndexOf("/"))),r.push(i)}return t.functionName&&r.push("@"+t.functionName),t.row&&r.push(" "+t.row),n.message+" - "+r.join("")},normalize:function(n){var e=_.parse(n);return e}},I=[],A={init:function(){var n=setInterval(function(){var e=window.performance&&window.performance.timing;e&&0===e.loadEventEnd||(clearInterval(n),setTimeout(function(){l()},10))},300);window.onerror=v},sendMsg:function(e){var r=g(e);if(r){n(r,{formatUrl:t()});var i=window.logger;i&&i.log&&i.log("016000011",r)}}},M={init:function(){m()&&m()<9||(W(),S(),E())}};window._trace&&console&&console.warn&&console.warn("WARNING: you already import trace"),"undefined"==typeof window.console&&(window.console={log:function(){},warn:function(){}}),A.init(),M.init();var P=(window._trace={send:function(){},sendImmediately:function(){},version:"1.1.3",config:T,sendMsg:A.sendMsg},{});return P})()});;fml.define("lib/logger",["common/ptpParams"],function(e,t){"use strict";e("common/ptpParams"),function(e){function n(){this.arr="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",this.arrLen=this.arr.length}function r(){var e=g.getPtpInfoAndExtra(),t=f.getValue(l.pEventId);v.logData("p",t,e)}function o(){if(i.info.isNative){var e=g.getPtpCnt();v.logAppPevent(e)}else m?r():f.listenTo("LoggerReady",function(){r()})}if(!e.logger){var i=e.logger={};i.version="0.1.17",i._xcore=!1;var a=navigator.userAgent.toLowerCase().indexOf("xcore")>-1;a&&window.loader&&window.loader.script&&(i._xcore=!0),"undefined"==typeof console&&(window.console={log:function(){}});var u="**logger.js---打点出错:";!function(){function e(){if(!r){r=!0;for(var e=0;e<n.length;e++)n[e].fn.call(window,n[e].ctx);n=[]}}function t(){"complete"===document.readyState&&e()}var n=[],r=!1,o=!1;i._xcore&&(r=!0),i.ready=function(i,a){return r?void setTimeout(function(){i(a)},1):(n.push({fn:i,ctx:a}),void("complete"===document.readyState||!document.attachEvent&&"interactive"===document.readyState?setTimeout(e,1):o||(document.addEventListener?(document.addEventListener("DOMContentLoaded",e,!1),window.addEventListener("load",e,!1)):(document.attachEvent("onreadystatechange",t),window.attachEvent("onload",e)),o=!0)))}}(),function(){var e=window.jQuery||window.Zepto,t=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]==t)return n+1;return-1},n={getA:function(e){var t=e;if("A"==t.tagName)return e;for(;t.parentNode;)if(t=t.parentNode,"A"==t.tagName)return t},getParentByClass:function(t,n){if(t){if(e)return $(t).parents("."+n);for(var r,o=t;o.parentNode;)if(o=o.parentNode,r=o.className&&o.className.indexOf(n)!=-1)return o}},getParents:function(t,n){if(t){if(n=n||"",e)return n="["+n+"]",$(t).parents(n)[0];for(var r,o=t;o.parentNode;)if(o=o.parentNode,r=o.getAttribute&&o.getAttribute(n))return o}},getIndex:function(n,r,o){if(!n||!r||!o)return 0;if(e)return $("["+n+'="'+r+'"]').index($(o))+1;if(document.querySelectorAll){var i=document.querySelectorAll("["+n+'="'+r+'"]');return t(i,o)}return 1},getElemIndex:function(n,r,o){if(!n||!r||!o)return 0;if(e)return $(n).find(r).index($(o))+1;if(n.querySelectorAll){var i=n.querySelectorAll(r);return t(i,o)}return 1},is:function(e,t){return!(!e||!t)&&(e.length&&(e=e[0]),e.nodeName.toLowerCase()===t.toLowerCase()||void 0)}};i.jq=n}();var c=1001,d={},f={getIEVersion:function(){var e,t=-1,n=navigator.userAgent;return"Microsoft Internet Explorer"==navigator.appName?(e=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})"),null!==e.exec(n)&&(t=parseFloat(RegExp.$1))):"Netscape"==navigator.appName&&(e=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})"),null!==e.exec(n)&&(t=parseFloat(RegExp.$1))),t},stringify:function(e){if("undefined"!=typeof JSON)return JSON.stringify(e);var t=typeof e;if("object"!=t||null===e)return"string"==t&&(e='"'+e+'"'),String(e);var n,r,o=[],i=e&&e.constructor==Array;for(n in e)r=e[n],t=typeof r,e.hasOwnProperty(n)&&("string"==t?r='"'+r+'"':"object"==t&&null!==r&&(r=f.stringify(r)),o.push((i?"":'"'+n+'":')+String(r)));return(i?"[":"{")+String(o)+(i?"]":"}")},isArray:function(e){return"[object Array]"==Object.prototype.toString.call(e)},getCookieInArray:function(e){for(var t=0,n=e.length;t<n;t++){var r=f.getCookie(e[t]);if(r)return r}return""},getCookieOrFunc:function(e){return"function"==typeof e?f.getValue(e):f.getCookie(e)},getCookie:function(e){if(f.isArray(e))return f.getCookieInArray(e);var t=document.cookie.match(new RegExp("(^| )"+e+"=([^;]*)(;|$)"));return null!==t?decodeURIComponent(t[2]):""},getQuery:function(e,t){void 0===t&&(t=location.search),t=t.split("#")[0];var n="(^|&|\\?)"+e+"=([^&]*)(&|$)",r=new RegExp(n,"i"),o=t.substr(1).match(r);return null!==o?decodeURIComponent(o[2]):""},setQuery:function(e,t,n){var r=new RegExp("([?&])"+t+"=.*?(&|$)","i"),o=e.indexOf("?")!==-1?"&":"?";return e.match(r)?e.replace(r,"$1"+t+"="+n+"$2"):e+o+t+"="+n},getTime:function(){return parseInt((new Date).getTime()/1e3)},registerEvent:function(e,t,n){window.attachEvent?e.attachEvent("on"+t,n):e.addEventListener(t,n,!1)},extend:function(){for(var e=arguments,t=arguments[0],n=1;n<e.length;n++){var r=e[n];for(var o in r)r.hasOwnProperty(o)&&(t[o]=r[o])}return t},getValue:function(e){if(e){if("function"==typeof e)try{var t=Array.prototype.slice.call(arguments,1);return e.apply(null,t)}catch(n){return console.log(u+n),""}return e}},loadScript:function(e,t){if(window["callback_"+c]=function(e){t&&t(e)},e+="?callback=callback_"+c,c+=1,i._xcore)window.loader.script(e);else{var n=document.createElement("script");n.src=e;var r=document.getElementsByTagName("head")[0];r&&r.appendChild(n)}},listenTo:function(e,t){d[e]||(d[e]=[]),d[e].push(t)},fire:function(e){var t=d[e];if(t&&t.length){for(var n=0,r=t.length;n<r;n++)t[n].call();d[e]=[]}},hasKey:function(e){if(!e)return!1;for(var t in e)if(e.hasOwnProperty(t))return!0;return!1}};i.util=f;var p="https:"===location.protocol?"https:":"http:",s="mogujie";location.host.indexOf("meilishuo")!=-1&&(s="meilishuo"),i.config={LogUrl:p+"//log.juangua.com/log.php",LogMoGuJsUrl:p+"//log.juangua.com/mogu.js",CookieUrl:p+"//portal."+s+".com/api/util/getUuid",shouldRequestCookie:function(){if(location.protocol.indexOf("file:")!=-1)return!1;var e=i.util.getCookieOrFunc(i.config.uuid);return!e},uuid:["__mgjuuid","__xduuid"],uid:"__ud_",sfrom:"from_site",cpsinfo:"__cpsinfo",ptp_cnt_a:"",ptp_cnt_b:"",ptp_cnt_c_d:"",platform:function(){var e=navigator.userAgent.toLowerCase();if(/qq\/([\d\.]+)/.test(e))return 48},pEventId:"1001",isMobileRe:/iphone|android|ipad/i,ptpRe:/[a-z0-9]+\.[a-z0-9]+\.[a-z0-9]+\.[a-z0-9]+\.[a-z0-9]+/i,hrefRe:/http[s]?:\/\/\w+\.(mogujie|xiaodian|uniny)\.com([\/]|\/.*|)$/,mgjRe:/mgj:\/\//,mtRe:/\?.*[&]?mt=([^\.]+)\.([^\.]+)\.([^\.&#]+)/,chasing:["f","f2","mlf"],urlExtend:["acm"],urlExtendFn:function(e){},extra:{},isNativeRe:/mogujie(?!nonative)/i,nativeLog:{}},n.prototype={rand:function(e){var t,n="";for(t=0;e>t;t++)n+=this.arr.charAt(Math.random()*this.arrLen);return n},pageHash:function(e){var t=5381,n=e.length-1;if("string"==typeof e)for(;n>-1;n--)t+=(t<<5)+e.charCodeAt(n);else for(;n>-1;n--)t+=(t<<5)+e[n];var r=2147483647&t,o="";do o+=this.arr.charAt(61&r);while(r>>=6);return o}},function(){var e=i.config,t=navigator.userAgent.toLocaleLowerCase();i.info={isApp:e.isNativeRe.test(t),isNative:e.isNativeRe.test(t),isMobile:e.isMobileRe.test(t),isIos:t.indexOf("iphone")>-1,isAndroid:t.indexOf("android")>-1,isXd:location.href.indexOf(".xiaodian.")>-1}}(),function(){function e(){var e="1";return g.isMobile&&(e="m1"),g.isIos&&g.isNative?e="am0":g.isAndroid&&g.isNative&&(e="am1"),e}function t(){var e=f.getValue(s.ptp_cnt_b);if(e)return e;var t="",n=location.href.split("?")[0];return t=v.pageHash(n)}function r(){var e=f.getCookieOrFunc(s.cpsinfo);return e?e=e.replace("-",","):""}function o(){var e=f.getValue(s.platform);return e?e:g.isMobile?32:31}function a(e){if(e){var t=f.getValue(s.urlExtendFn,e);return f.hasKey(t)?t:void 0}}function u(e){if(e){e.length&&(e=e[0]);var t=f.getValue(s.ptp_cnt_c_d,e);if(t)return t;var n=e.getAttribute("data-ptp-customc");if(n)return{c:n,d:l.getIndex("data-ptp-customc",n,e)};if(e=l.getParents(e,"data-ptp-customc"))return n=e.getAttribute("data-ptp-customc"),n?{c:n,d:l.getIndex("data-ptp-customc",n,e)}:void 0}}function c(){return window.PTP_PARAMS&&f.extend(s,PTP_PARAMS),{time:f.getTime(),sfrom:f.getCookieOrFunc(s.sfrom),uuid:f.getCookieOrFunc(s.uuid),uid:f.getCookieOrFunc(s.uid),cpsinfo:r(),refer:location.href,rerefer:document.referrer,ptp_url:f.getQuery("ptp",location.search),ptp_ref:f.getQuery("ptp",document.referrer),_notNative:!g.isNative}}function d(){h.a=e(),h.b=t(),h.c=0,h.d=0}var p,s=i.config,g=i.info,l=i.jq,v=new n,m=c(),h={a:e(),b:t(),c:0,d:0,e:s.ptp_cnt_e?s.ptp_cnt_e:v.rand(5)};i.ptp=p={getPtpByType:function(e,t){var n=o(),r=[m.time,0,"p/e",n,i.version,"1001",m.uuid,m.uid,m.refer,m.rerefer];return"p"==e?(t=t||"1001",r[2]="p",r[5]=t,r):"e"==e?(t=t||"50001",r[2]="e",r[5]=t,r):void 0},getPtpCnt:function(e,t){return e||(e=h.c),t||(t=h.d),[h.a,h.b,e,t,h.e].join(".")},getPtpInfo:function(){var e={};return f.extend(e,m,{ptp_cnt:p.getPtpCnt()})},getPtpInfoAndExtra:function(){var e=p.getPtpInfo(),t={};if(s.extra)for(var n in s.extra)s.extra.hasOwnProperty(n)&&(t[n]=f.getValue(s.extra[n]));return f.extend(e,t)},createPtpCnt:function(e){var t=u(e),n=0,r=0;if(t)return p.getPtpCnt(t.c,t.d);var o=l.getParents(e,"data-ptp"),i=l.getParentByClass(e,"data-ptp-item");return o&&(n=o.getAttribute("data-ptp"),r=i?l.getElemIndex(o,".data-ptp-item",i):l.getElemIndex(o,"a",e)),r||(r=0),p.getPtpCnt(n,r)},makeUrl:function(e,t,n){var r=e.match(/(#.+)$/);return e=e.replace(/(#.+)$/,""),e=f.setQuery(e,"ptp",t),e=p.getChasingParams(e),e=p.getExtendParams(n,e),r&&(e+=r[1]),e},getChasingParams:function(e){void 0===e&&(e="");var t=e;if(!s.chasing)return t;s.chasing.length||(s.chasing=[s.chasing]);for(var n,r,o=0,i=s.chasing.length;o<i;o++)n=s.chasing[o],r=f.getQuery(n),r&&(t=f.setQuery(t,n,r));for(var a=location.search.split("#")[0],u=/[\?&](_f_[^=]+)=([^&]+)/g,c=u.exec(a);c&&3==c.length;)t=f.setQuery(t,c[1],c[2]),c=u.exec(a);return t},getExtendParams:function(e,t){var n=t;if(!e||!l.is(e,"a"))return n;var r=a(e);if(r)for(var o in r)r.hasOwnProperty(o)&&(n=f.setQuery(n,o,r[o]));else{e.length&&(e=e[0]);for(var i=s.urlExtend||[],u=0,c=i.length;u<c;u++){var d=i[u],p=e.getAttribute("data-ext-"+d);p&&(n=f.setQuery(n,d,p))}}return n},refreshPtp:function(){m=c(),d()},refreshE:function(){h&&(h.e=v.rand(5))},refreshCookie:function(){m&&(m.sfrom=f.getCookieOrFunc(s.sfrom),m.uuid=f.getCookieOrFunc(s.uuid),m.uid=f.getCookieOrFunc(s.uid),m.cpsinfo=r())}}}(),function(){var e=i.info,t=i.ptp,n=i.config,r=0,o=function(e,t){t=t||{};var n=[];for(var r in t){var o=t[r];o||(o=""),o=encodeURIComponent(o),n.push(r+"="+o)}n=n.join("&"),e=e.indexOf("?")>-1?e+"&"+n:e+"?"+n;var i=new Image;i.src=e},a=function(e,t){t=t||{};var n,o=r++;try{n=document.createElement('<iframe name="'+o+'">')}catch(i){n=document.createElement("iframe"),n.setAttribute("name",o)}try{n.style.display="none",document.body.appendChild(n),n.contentWindow.name=o;var a=document.createElement("form");a.setAttribute("method","POST"),a.setAttribute("action",e),a.setAttribute("target",o);for(var c in t)if(t.hasOwnProperty(c)){var d=document.createElement("input");d.setAttribute("type","hidden"),d.setAttribute("name",c),d.setAttribute("value",t[c]),a.appendChild(d)}document.body.appendChild(a),a.submit(),f.registerEvent(n,"load",function(){try{document.body.removeChild(a),document.body.removeChild(n)}catch(e){}})}catch(i){console.log(u+i)}},c={sendLog:function(e,t,n){var r=f.getIEVersion(),i=r!=-1&&r<=8;i&&!n?a(e,t):o(e,t)},sendAppLog:function(e,t){return e+="",n.nativeLog&&n.nativeLog.logE?n.nativeLog.logE(e,t):void(window.hdp&&window.hdp["do"]?hdp["do"]("mgj.tracker.sendEvent",e,t):document.addEventListener("deviceready",function(){window.mgj&&mgj.tracker&&mgj.tracker.sendEvent&&mgj.tracker.sendEvent(e,t)},!1))},logAppPevent:function(e){return n.nativeLog&&n.nativeLog.logP?n.nativeLog.logP(e):void(window.hdp&&window.hdp["do"]?hdp["do"]("mgj.pevent",e).then(function(){},function(e){console.log("pevent:"+e)}):document.addEventListener("deviceready",function(){window.mgj&&mgj.pevent&&mgj.pevent(function(){},null,e)},!1))},logData:function(r,o,i){var a=t.getPtpByType(r,o);a.push(f.stringify(i)),e.isNative?c.sendAppLog(o,i):c.sendLog(n.LogUrl,{v:1,data:a.join("\t")})}};i.send=c}(),function(){function e(e){var t=e.href;if(!(t.indexOf("mogujie.com/mtalk/")>-1)&&(r.hrefRe.test(t)||r.mgjRe.test(t))){var n=e.getAttribute("data-ptp-cache-id");t=e.getAttribute("href"),n&&r.ptpRe.test(n)||(n=o.createPtpCnt(e),e.setAttribute("data-ptp-cache-id",n)),e.href=o.makeUrl(t,n,e)}}function t(e){if(e.getAttribute){var t=e.getAttribute("href");if(null==t||0===t.indexOf("#"))return!1}return!0}function n(n){var r=n||window.event,o=r.target||r.srcElement,i=a.getA(o),u="AREA"===o.nodeName?o:null;u&&(i=u),i&&(i.href&&i.href.indexOf("javascript:")>-1||t(i)&&e(i))}var r=i.config,o=i.ptp,a=i.jq;if(!i._xcore){var u="tap"in document.createElement("div")?"tap":"mousedown";f.registerEvent(document,u,n),f.registerEvent(document,"touchstart",n)}}();var g=i.ptp,l=i.config,v=i.send,m=!l.shouldRequestCookie();m||f.loadScript(l.CookieUrl,function(){m=!0,i.ptp.refreshCookie(),f.fire("LoggerReady")}),i.ready(function(){i.ptp.refreshPtp(),o()}),i.refreshPevent=function(){i.ready(function(){i.ptp.refreshPtp(),i.ptp.refreshE(),o()})},i.log=function(e,t){void 0!==e&&(t=t||{},i.ready(function(){var n=g.getPtpInfoAndExtra();m?i.send.logData("e",e,f.extend({},n,t)):f.listenTo("LoggerReady",function(){var n=g.getPtpInfoAndExtra();i.send.logData("e",e,f.extend({},n,t))}),window.MtaH5&&MtaH5.clickStat&&MtaH5.clickStat(e,t)}))},i.generatePtpParams=function(e,t){if(void 0!==e){var n="";return n=t?g.createPtpCnt(t):g.getPtpCnt(),g.makeUrl(e,n,t)}},"undefined"!=typeof module&&"object"==typeof t?module.exports=i:"function"==typeof define&&(define.amd||define.cmd)&&define("logger",function(){return i})}}(window)});;fml.define("common/biu",[],function(o,t){"use strict";var n=function(){function o(){n.css("height",$(document).height()+"px")}function t(o){var t={url:location.href,refer:document.referrer,keyword:o};logger.log("000815009",t)}var n=$(".biu-sidebar"),u=$(".biu-download"),e=$(".mls-qrcode");o(),$(window).resize(function(){o()}),u.hover(function(){e.css("display","block")},function(){e.css("display","none")}),$(window).scroll(function(){document.body.scrollTop?document.body.scrollTop>0?$(".biu-go2top").css("display","block"):$(".biu-go2top").css("display","none"):document.documentElement.scrollTop&&document.documentElement.scrollTop>0?$(".biu-go2top").css("display","block"):$(".biu-go2top").css("display","none")}),$(".biu-go2top").on("click",function(){window.scrollTo(0,0)}),$(".biu-cart").on("click",function(){var o="购物车";t(o)}),$(".biu-coupon").on("click",function(){var o="优惠券";t(o)}),$(".biu-mark").on("click",function(){var o="收藏";t(o)}),$(".biu-footprint").on("click",function(){var o="足迹";t(o)}),$.ajax({type:"get",url:"http://cart.meilishuo.com/api/cart/getItemCount?marketType=market_meilishuo",dataType:"jsonp",success:function(o){var t=o||{};1001==t.status.code&&t.result&&t.result.count>0&&(t.result.count>99?$(".biu-cart-num").text("99+"):$(".biu-cart-num").text(t.result.count))},error:function(){console.log("--右侧栏 jsonp请求购物车商品数出错")}}),$.ajax({type:"get",url:"http://promotionnew.meilishuo.com/jsonp/getUnUsedCouponNumber/1?domain=11",dataType:"jsonp",success:function(o){var t=o||{};t.success&&t.data.number>0&&(t.data.number>99?$(".biu-coupon-num").text("99+"):$(".biu-coupon-num").text(t.data.number))},error:function(){console.log("--右侧栏 jsonp请求优惠券数出错")}});var c=$(".biu-login").text(),i=""==c||"0"==c||null==c&&void 0!=c||" "==c;!i&&$.ajax({type:"get",url:"http://webim.meilishuo.com/jsonp/cinfo/1",dataType:"jsonp",success:function(o){var t=o||{};t.success&&t.data>0&&$(".biu-service-num").addClass("biu-service-num-circle")},error:function(o,t){console.log("--右侧栏 jsonp请求客服消息数出错")}}),$(".biu-open-im").on("click",function(){var o=$(".biu-login").text(),n=$(this).data("shopid")||"",u="消息";return t(u),""==o||"0"==o||null==o&&void 0!=o||" "==o?(window.open("http://www.meilishuo.com/user/login"),!1):(window._openIm(n),!1)})};n.prototype.biuAddCart=function(o){$.ajax({type:"get",url:"http://cart.meilishuo.com/api/cart/getItemCount?marketType=market_meilishuo",dataType:"jsonp",jsonp:"biuCartNum",success:function(t){var n=t||{};if(1001==n.status.code&&n.result&&n.result.count>0){var u=n.result.count+o;u>0&&u<100?$(".biu-cart-num").text(u):$(".biu-cart-num").text("99+")}}})};var u=new n;t.biuAddCart=u.biuAddCart});;fml.define("common/nav",[],function(t,a){"use strict";var i=$(".sec_attr .list");$(".nav_list");i.hover(function(){var t=$(this).children(".nav_list");0!=t.length&&(i.removeClass("active"),$(this).addClass("active"),t.show())},function(){i.removeClass("active"),$(this).removeClass("active"),$(this).children(".nav_list").hide()});var e=i.length;i.each(function(t){t==e-1&&$(this).addClass("last")});var n=$(".attr_box");"welcome"==Meilishuo.config.controller?n.css("display","block"):$(".all , .attr_box").hover(function(){n.stop(!0,!0).slideDown()},function(t){t.stopPropagation(),n.find(".nav_list").hide(),n.stop(!0,!0).slideUp()});var s=$(".nav_tab"),l=s.find("a"),o={"/welcome":l.eq(0).html(),"/brand/street":l.eq(1).html(),"/daimaiPCrukou":l.eq(2).html(),"/select":l.eq(3).html()},c="",h=location.pathname;$.each(o,function(t,a){if(0==h.indexOf(t))return c=o[t],!1}),"/"==h&&(c="首页"),s.each(function(){var t=$(this).find("a").html();c==t&&$(this).find("a").addClass("active")})});;fml.define("common/search",[],function(t,e){"use strict";function a(t){t=t.list;for(var e="",a=0;a<t.length;a++){var n=t[a];e+='<a target="_blank" href="http://www.meilishuo.com/search/goods/?page=1&searchKey='+encodeURIComponent(n.word)+'" style="color:'+n.color+'">'+n.word+"</a >"}u.html(e)}function n(t){t&&t.list&&t.list.length&&(t=t.list[0],h.attr({placeholder:t.placehold,"data-placeholder":t.placehold,"data-key":t.word}))}function o(){$.ajax({url:"http://mce.mogucdn.com/jsonp/multiget/3?pids=5604,5571",dataType:"jsonp"}).then(function(t){t.success&&(a(t.data[5571]),n(t.data[5604]))})}function i(t){var e=/(?:&|\?)searchKey=([^&]+)/.exec(location.search);e&&e[1]&&h.val(decodeURI(e[1]));var a=/(?:&|\?)filter=([^&]+)/.exec(location.search);a=a&&a[1],"shop"==a&&c(f.find("span")[1])}function c(t){$(t).is("span")&&(f.find("span").removeClass("active"),$(t).addClass("active"),v=$(t).index(),h.attr("placeholder",0==v?h.attr("data-placeholder"):""))}function s(){if(0==v){var t=$.trim($(this).val());if(t){if(w.lastVal==t)return void p.show();w.lastVal=t,w.cache[v]=w.cache[v]||{};var e=w.cache[v];clearTimeout(w.delayId),w.delayId=setTimeout(function(){e[t]?w.render(e[t]):$.ajax({url:w.url,data:{data:'{"keyword":"'+encodeURIComponent(t)+'"}'},dataType:"jsonp"}).then(function(a){e[t]=a,w.render(e[t])})},w.delayTime)}}}function l(t){var e=$(".active",p).removeClass("active");e.length?"up"==t?(e=e.prev(),e.length||(e=p.find(".item").last())):(e=e.next(),e.length||(e=p.find(".item").first())):e=p.find(".item").first(),e.addClass("active"),h.val(e.attr("data-title"))}function r(t){if(t=0==v?$.trim(t)||$.trim(h.attr("data-key")):$.trim(t)){var e=(encodeURIComponent(t),"http://www.meilishuo.com/search/goods/?page=1&searchKey="+encodeURIComponent(t));0!=v&&(e="http://www.meilishuo.com/search/shop/"+encodeURIComponent(t)+"?filter=shop"),location.href=e}}function d(){i(),o(),f.click(function(t){c(t.target)}),g?h.on("input",function(){s.call(this)}):h.on("propertychange",function(){s.call(this)}),h.on("blur",function(){setTimeout(function(){p.hide()},250)}).on("focus",function(){s.call(this)}).on("keyup",function(t){var e=t.keyCode;if(38==e||40==e){var a=38==e?"up":"down";l(a)}else 13==e&&r(this.value)}),p.on("mouseover",function(t){$(".item",this).removeClass("active"),$(t.target).closest(".item").addClass("active")}).on("click",function(t){var e=$(".active",this).attr("data-title"),a=t.target;r("span"==a.tagName.toLowerCase()?e+" "+$(a).text():e)}),m.on("click",function(){r(h.val())})}var h=$(".search-txt"),u=$(".hotword"),f=$(".search-tab"),p=$(".suggest-box"),m=$(".search-btn"),v=0,g="oninput"in document,w={lastVal:null,delayId:null,cache:{},url:"http://search.mogujie.com/jsonp/searchTipsMLS/1",delayTime:500,render:function(t){if(t&&t.success){for(var e=t.data.tips,a="",n=0;n<e.length;n++){for(var o=e[n].props,i="",c=0;c<o.length;c++)i+="<span>"+o[c].title+"</span>";a+='<div class="item" data-title="'+e[n].title+'">'+e[n].title+'<div class="tags">'+i+"</div></div>"}p.html(a).show()}else p.hide()}};d()});;fml.define("common/topbar",[],function(t,a){"use strict";function s(t){var a=$(".cart-goods"),s={marketType:"market_meilishuo",topNum:5};$.ajax({url:"http://cart.meilishuo.com/api/cart/miniCartList",data:s,dataType:"jsonp"}).then(function(s){if("1001"==s.status.code){var e="",o=s.result.cartItems?s.result.cartItems.length:0,r=Math.min(5,o);if(r>0){$(".cart-wrapper .hidden").addClass("down").removeClass("hidden"),t();for(var c=0;c<r;c++){for(var i=s.result.cartItems[c],n="",l=0,d=i.skuAttributes.length;l<d;l++){var p=i.skuAttributes[l];n+="<span>"+p.key+":"+p.value+"</span>&nbsp;&nbsp;"}e+='<li><a href="http://item.meilishuo.com/detail/'+i.itemIdEsc+'" target="_blank" style="padding: 0; float: left;"><span class="cart-goods-img" style="background: url('+i.imgUrl+') no-repeat; background-size: cover;"></span></a><div class="cart-goods-desc"><p><a href="http://item.meilishuo.com/detail/'+i.itemIdEsc+'" target="_blank" style="padding: 0; float: left;"><span class="cart-goods-title">'+i.title+'</span></a><span class="cart-goods-price">￥'+i.nowprice/100+'</span></p><p class="cart-goods-info"><span class="cart-goods-title">'+n+'</span><em class="del-cart-goods" data-stock="'+i.stockIdEsc+'"></em></p></div></li>'}a.html(e)}}})}function e(){$.ajax({url:"http://cart.meilishuo.com/api/cart/getItemCount",data:{marketType:"market_meilishuo"},dataType:"jsonp"}).then(function(t){var a=t.status,s=t.result.count>99?"99+":t.result.count;a.isLogin&&"1001"==a.code&&0!=s&&($(".cart .hidden").addClass(".down").removeClass(".hidden"),$(".my-cart").append('<span class="cart-num">'+s+"</span>"),$(".cart-account .num").text(s))})}function o(){s(e),$("#com-topbar").on("click",".del-cart-goods",function(){var t=$(this).closest("li"),a=$(this).closest(".down"),s=$(this).data("stock");$.ajax({url:"http://cart.meilishuo.com/api/cart/deleteCart",data:{marketType:"market_meilishuo",stockId:s},dataType:"jsonp"}).then(function(s){t.remove();var e=a.find(".cart-goods li").length;e||a.remove()})})}o()});;fml.define("common/assert",[],function(o,i){"use strict";Meilishuo.global.assert=function(o,i){if(!o)throw Error(i)}});;fml.define("common/polyfill",[],function(n,t){"use strict";Date.now||(Date.now=function(){return(new Date).getTime()});for(var e=["webkit","moz"],o=0;o<e.length&&!window.requestAnimationFrame;++o){var r=e[o];window.requestAnimationFrame=window[r+"RequestAnimationFrame"],window.cancelAnimationFrame=window[r+"CancelAnimationFrame"]||window[r+"CancelRequestAnimationFrame"]}if(/iP(ad|hone|od).*OS 6/.test(window.navigator.userAgent)||!window.requestAnimationFrame||!window.cancelAnimationFrame){var i=0;window.requestAnimationFrame=function(n){var t=Date.now(),e=Math.max(i+16,t);return setTimeout(function(){n(i=e)},e-t)},window.cancelAnimationFrame=clearTimeout}Array.prototype.forEach||(Array.prototype.forEach=function(n,t){var e,o;if(null==this)throw new TypeError(" this is null or not defined");var r=Object(this),i=r.length>>>0;if("function"!=typeof n)throw new TypeError(n+" is not a function");for(arguments.length>1&&(e=t),o=0;o<i;){var a;o in r&&(a=r[o],n.call(e,a,o,r)),o++}}),Array.prototype.map||(Array.prototype.map=function(n,t){var e,o,r;if(null==this)throw new TypeError(" this is null or not defined");var i=Object(this),a=i.length>>>0;if("[object Function]"!=Object.prototype.toString.call(n))throw new TypeError(n+" is not a function");for(t&&(e=t),o=new Array(a),r=0;r<a;){var w,c;r in i&&(w=i[r],c=n.call(e,w,r,i),o[r]=c),r++}return o})});;fml.define("page/pcenter/common/navbar",[],function(a,e){"use strict";var n=window.location.pathname,o=window.location.protocol+"//"+window.location.hostname;switch(console.log(n,o),"/pcenter/coupon/"==n||"/pcenter/coupon"==n||"/pcenter/coupon/index"==n?n="/pcenter/coupon/index":"/account/bindNobile"!=n&&"/account/changeMobile"!=n||(n="/account/bindMobile"),n){case"/pcenter/coupon/index":$(".menu_coupon_plat").addClass("active");break;case"/account/bindMobile":$(".menu_bindmobile").addClass("active");break;case"/account/setPersonal":$(".menu_setPersonal").addClass("active");break;case"/account/setPassword":$(".menu_setPassword").addClass("active");break;case"/account/setAvatar":$(".menu_setAvatar").addClass("active");break;case"/account/payPassword":$(".menu_payPassword").addClass("active");break;case"/account/loginEqm":$(".menu_loginEqm").addClass("active")}var c=$(".maidian-navbar");c.on("click",function(a){var e=$(a.target)||$(a.srcElement),n=$(this),o={url:window.location.host+e.attr("href"),refer:window.location.href,name:e.attr("data-title")};logger.log(n.attr("data-code"),o)})});;function HS_DateAdd(e,t,a){if(t=parseInt(t),"string"==typeof a)var a=new Date(a.split("-")[0],a.split("-")[1],a.split("-")[2]);if("object"==typeof a)var a=a;switch(e){case"y":return new Date(a.getFullYear()+t,a.getMonth(),a.getDate());case"m":return new Date(a.getFullYear(),a.getMonth()+t,checkDate(a.getFullYear(),a.getMonth()+t,a.getDate()));case"d":return new Date(a.getFullYear(),a.getMonth(),a.getDate()+t);case"w":return new Date(a.getFullYear(),a.getMonth(),7*t+a.getDate())}}function checkDate(e,t,a){var n=["31","28","31","30","31","30","31","31","30","31","30","31"],l="";return e%4==0&&(n[1]="29"),l=a>n[t]?n[t]:a}function WeekDay(e){var t;return"string"==typeof e&&(t=new Date(e.split("-")[0],e.split("-")[1],e.split("-")[2])),"object"==typeof e&&(t=e),t.getDay()}function HS_calender(){var e="",t="";t+="<style type='text/css'>",t+=".calender { width:270px; height:auto; font-size:12px; margin-right:14px; background-color:#fff; border:1px solid #ccc; padding:1px}",t+=".calender ul {list-style-type:none; margin:0; padding:0;}",t+=".calender .day { background-color:#EDF5FF; height:30px;}",t+=".calender .day li,.calender .date li{ float:left; width:14%; height:30px; line-height:30px; text-align:center}",t+=".calender li a { text-decoration:none; font-family:Tahoma; font-size:11px; color:#333}",t+=".calender li a:hover { color:#f36; text-decoration:underline}",t+=".calender li a.hasArticle {font-weight:bold; color:#f60 !important}",t+=".lastMonthDate, .nextMonthDate {color:#bbb;font-size:11px}",t+=".selectThisYear a, .selectThisMonth a{text-decoration:none; margin:0 2px; color:#333; font-weight:bold}",t+=".calender .LastMonth, .calender .NextMonth{ text-decoration:none; color:#333; font-size:18px; line-height:30px;}",t+=".calender .LastMonth { float:left;}",t+=".calender .NextMonth { float:right;}",t+=".calenderBody {clear:both}",t+=".calenderTitle {text-align:center;height:30px; line-height:30px; clear:both}",t+=".today { background-color:#ececec;border:1px solid #ccc; padding:5px 10px;}",t+=".today a { color:#f30; }",t+=".calenderBottom {clear:both; border-top:1px solid #ddd; padding: 3px 0; text-align:left; line-height:20px; height: 20px;}",t+=".calenderBottom a {text-decoration:none; margin:0 2px !important; font-weight:bold; color:#333}",t+=".calenderBottom a.closeCalender{float:right}",t+=".closeCalenderBox {float:right; border:1px solid #333; background:#fff; font-size:9px; width:11px; height:11px; line-height:11px; text-align:center;overflow:hidden; font-weight:normal !important}",t+="</style>";var a;if("string"==typeof arguments[0]){selectDate=arguments[0].split("-");var n=selectDate[0],l=parseInt(selectDate[1])-1+"",o=selectDate[2];a=new Date(n,l,o)}else"object"==typeof arguments[0]&&(a=arguments[0]);for(var i=HS_DateAdd("d","-1",a.getFullYear()+"-"+a.getMonth()+"-01").getDate(),r=WeekDay(a.getFullYear()+"-"+a.getMonth()+"-01"),s=HS_DateAdd("d","-1",a.getFullYear()+"-"+(parseInt(a.getMonth())+1).toString()+"-01"),c=s.getDate(),d=s.getDay(),h=new Date,p=h.getFullYear()+"-"+h.getMonth()+"-"+h.getDate(),g=0;g<r;g++)e="<li class='lastMonthDate'>"+i+"</li>"+e,i--;for(var g=1;g<=c;g++){var f=parseInt(a.getMonth())+1<10?"0"+(parseInt(a.getMonth())+1):parseInt(a.getMonth())+1,u=g<10?"0"+g:g;if(p==a.getFullYear()+"-"+a.getMonth()+"-"+g){var v=a.getFullYear()+"-"+(parseInt(a.getMonth())+1>10?parseInt(a.getMonth())+1:"0"+(parseInt(a.getMonth())+1))+"-"+(g>10?g:"0"+g);e+="<li><a href=javascript:void(0) class='today' onclick='_selectThisDay(this)' title='"+a.getFullYear()+"-"+f+"-"+u+"'>"+g+"</a></li>"}else e+="<li><a href=javascript:void(0) onclick='_selectThisDay(this)' title='"+a.getFullYear()+"-"+f+"-"+u+"'>"+g+"</a></li>"}for(var x=1,g=d;g<6;g++)e+="<li class='nextMonthDate'>"+x+"</li>",x++;e+=t;var M="<a href='javascript:void(0)' class='NextMonth' onclick=HS_calender(HS_DateAdd('m',1,'"+a.getFullYear()+"-"+a.getMonth()+"-"+a.getDate()+"'),this) title='Next Month'>&gt;</a>";if(M+="<a href='javascript:void(0)' class='LastMonth' onclick=HS_calender(HS_DateAdd('m',-1,'"+a.getFullYear()+"-"+a.getMonth()+"-"+a.getDate()+"'),this) title='Previous Month'>&lt;</a>",M+="<span class='selectThisYear'><a href='javascript:void(0)' onclick='CalenderselectYear(this)' title='Click here to select other year' >"+a.getFullYear()+"</a></span>年<span class='selectThisMonth'><a href='javascript:void(0)' onclick='CalenderselectMonth(this)' title='Click here to select other month'>"+(parseInt(a.getMonth())+1).toString()+"</a></span>月",!(arguments.length>1)){var D=t+"<div class='calender'><div class='calenderTitle'>"+M+"</div><div class='calenderBody'><ul class='day'><li>日</li><li>一</li><li>二</li><li>三</li><li>四</li><li>五</li><li>六</li></ul><ul class='date' id='thisMonthDate'>"+e+"</ul></div><div class='calenderBottom'><a href='javascript:void(0)' class='closeCalender' onclick='closeCalender(this)'>&times;</a><span><span><a href=javascript:void(0) onclick='_selectThisDay(this)' title='"+v+"'>Today</a></span></span></div></div>";return D}arguments[1].parentNode.parentNode.getElementsByTagName("ul")[1].innerHTML=e,arguments[1].parentNode.innerHTML=M}function _selectThisDay(e){var t=e.parentNode.parentNode.parentNode.parentNode.parentNode;t.targetObj.value=e.title,t.parentNode.removeChild(t)}function closeCalender(e){var t=e.parentNode.parentNode.parentNode;t.parentNode.removeChild(t)}function CalenderselectYear(e){var t="",a=e.innerHTML;for(i=1970;i<=2020;i++)t+=i==a?"<option value="+i+" selected>"+i+"</option>":"<option value="+i+">"+i+"</option>";t="<select onblur='selectThisYear(this)' onchange='selectThisYear(this)' style='font-size:11px'>"+t+"</select>",e.parentNode.innerHTML=t}function selectThisYear(e){HS_calender(e.value+"-"+e.parentNode.parentNode.getElementsByTagName("span")[1].getElementsByTagName("a")[0].innerHTML+"-1",e.parentNode)}function CalenderselectMonth(e){var t="",a=e.innerHTML;for(i=1;i<=12;i++)t+=i==a?"<option value="+i+" selected>"+i+"</option>":"<option value="+i+">"+i+"</option>";t="<select onblur='selectThisMonth(this)' onchange='selectThisMonth(this)' style='font-size:11px'>"+t+"</select>",e.parentNode.innerHTML=t}function selectThisMonth(e){HS_calender(e.parentNode.parentNode.getElementsByTagName("span")[0].getElementsByTagName("a")[0].innerHTML+"-"+e.value+"-1",e.parentNode)}function HS_setDate(e){var t=document.createElement("span");t.innerHTML=HS_calender(new Date),t.style.position="absolute",t.style.left="183px",t.style.top="262px",t.targetObj=e,e.parentNode.insertBefore(t,e.nextSibling)};fml.define("page/account/setPersonal/setPersonal",[],function(r,e){"use strict";var t={true_name_focus:"请修改您的真实姓名",true_name_format:"姓名不能包括字母，数字及特殊字符",true_name_length:"真实姓名不能超过6个字",introduction:"个人说明最多100个字哦～可以是中英文，数字，符号",nickname_format:"昵称只支持中英文，数字，下划线，限长10个字",nickname_repeat:"您的昵称太热了，请换一个",nickname_focus:"请填写您的昵称"};$("#true_name").on("focus",function(){var r=$(this);r.siblings("strong").html(t.true_name_focus).removeClass("error-text")}),$("#true_name").on("blur",function(){var r=$(this),e=r.val(),s=a("true_name",e);""!==s?(r.siblings("strong").html(t[s]||s).addClass("error-text"),r.addClass("error")):(r.siblings("strong").html("").removeClass("error-text"),r.removeClass("error"))}),$("#nickname").on("focus",function(){var r=$(this);r.siblings("strong").html(t.nickname_focus).removeClass("error-text")}),$("#nickname").on("blur",function(){var r=$(this),e=r.val();if(""==$.trim(e))return r.siblings("strong").html("昵称不能为空").addClass("error-text").removeClass("ok-text"),void r.addClass("error");a("nickname",e)}),$("#introduction").on("blur",function(){var r=$(this),e=r.val(),s=a("introduction",e);""!==s?(r.siblings("strong").html(t[s]||s).addClass("error-text"),r.addClass("error")):(r.siblings("strong").html("").removeClass("error-text"),r.removeClass("error"))}),$("#submit").on("click",function(){var r=$("#true_name").val(),e=$("#nickname").val(),t=$("#birthday").val(),a=$("#province_id").val(),n=$("#city_id").val(),o=$("#occupation").val(),i=$("#introduction").val(),l=$('[name="gender"]:checked').val();if(!($("#true_name").hasClass("error")||$("#introduction").hasClass("error")||$("#nickname").hasClass("error"))){var u={realName:r,uname:e,birthday:t,province:a,city:n,profession:o,introduce:i,gender:l};s("/aj/aj_account/setPersonal/updateBaseUserInfo",u,"post",function(r){$(".submitError").html("保存成功").removeClass("color-pink")},function(r){$(".submitError").addClass("color-pink").html(r.status&&r.status.msg)})}});var a=function(r,e){if("true_name"==r&&e){var t=/[0-9a-zA-A`~!@#$%^&*_+<>{}\/\s'[\]]/i;if(t.test(e))return"true_name_format";if(e.length>6)return"true_name_length"}if("nickname"==r){var a=$("#nickname");e=$.trim(e),s("/aj/aj_account/setPersonal/checkuname",{uname:e},"post",function(r){if(r.status&&1001==r.status.code)if(r.result&&1==r.result.status){var e=r.result.msg;a.siblings("strong").html(e).addClass("error-text").removeClass("ok-text"),a.addClass("error")}else a.siblings("strong").html("&nbsp;").addClass("ok-text").removeClass("error-text"),a.removeClass("error")},function(r){var e=r.status&&r.status.msg;a.siblings("strong").html(e).addClass("error-text").removeClass("ok-text"),a.addClass("error")})}return"introduction"==r&&(e=$.trim(e),e&&e.length>100)?"introduction":""},s=function(r,e,t,a,s){$.ajax({type:t,url:r,dataType:"json",data:e,success:function(r){r.status&&1001==r.status.code?a(r):s(r)},error:function(r,e){alert("操作失败，请稍后再试")}})},n=function(){s("/aj/aj_account/setPersonal/getBaseUserInfo",{},"POST",function(r){if(r.result){var e=r.result;$("#register_mail").val(e.email),$("#true_name").val(e.realName),$("#nickname").val(e.uname),$("#birthday").val(e.birthday),$("#province_id").val(e.province||0),$("#province_id").trigger("change"),$("#city_id").val(e.city||0),$("#occupation").val(e.profession||0),$("#introduction").val(e.introduce),1==e.gender?$("#male").get(0).checked=!0:2==e.gender&&($("#female").get(0).checked=!0)}},function(r){alert(r&&r.status&&r.status.msg||"请求失败，请稍后再试")})};n()});;fml.define("page/account/common/area",[],function(a,t){"use strict";var n={"北京":["东城","西城","崇文","宣武","朝阳","丰台","石景山","海淀","门头沟","房山","通州","顺义","昌平","大兴","平谷","怀柔","密云","延庆"],"上海":["崇明","黄浦","卢湾","徐汇","长宁","静安","普陀","闸北","虹口","杨浦","闵行","宝山","嘉定","浦东","金山","松江","青浦","南汇","奉贤"],"重庆":["万州","涪陵","渝中","大渡口","江北","沙坪坝","九龙坡","南岸","北碚","万盛","双挢","渝北","巴南","黔江","长寿","綦江","潼南","铜梁","大足","荣昌","壁山","梁平","城口","丰都","垫江","武隆","忠县","开县","云阳","奉节","巫山","巫溪","石柱","秀山","酉阳","彭水","江津","合川","永川","南川"],"安徽":["合肥","安庆","蚌埠","亳州","巢湖","滁州","阜阳","贵池","淮北","淮化","淮南","黄山","九华山","六安","马鞍山","宿州","铜陵","屯溪","芜湖","宣城"],"福建":["福州","福安","龙岩","南平","宁德","莆田","泉州","三明","邵武","石狮","永安","武夷山","厦门","漳州"],"甘肃":["兰州","白银","定西","敦煌","甘南","金昌","酒泉","临夏","平凉","天水","武都","武威","西峰","张掖"],"广东":["广州","潮阳","潮州","澄海","东莞","佛山","河源","惠州","江门","揭阳","开平","茂名","梅州","清远","汕头","汕尾","韶关","深圳","顺德","阳江","英德","云浮","增城","湛江","肇庆","中山","珠海"],"广西":["南宁","百色","北海","桂林","防城港","河池","贺州","柳州","钦州","梧州","玉林"],"贵州":["贵阳","安顺","毕节","都匀","凯里","六盘水","铜仁","兴义","玉屏","遵义"],"海南":["海口","儋县","陵水","琼海","三亚","通什","万宁"],"河北":["石家庄","保定","北戴河","沧州","承德","丰润","邯郸","衡水","廊坊","南戴河","秦皇岛","唐山","新城","邢台","张家口"],"黑龙江":["哈尔滨","北安","大庆","大兴安岭","鹤岗","黑河","佳木斯","鸡西","牡丹江","齐齐哈尔","七台河","双鸭山","绥化","伊春"],"河南":["郑州","安阳","鹤壁","潢川","焦作","济源","开封","漯河","洛阳","南阳","平顶山","濮阳","三门峡","商丘","新乡","信阳","许昌","周口","驻马店"],"香港":["香港","九龙","新界"],"湖北":["武汉","恩施","鄂州","黄冈","黄石","荆门","荆州","潜江","十堰","随州","武穴","仙桃","咸宁","襄阳","襄樊","孝感","宜昌"],"湖南":["长沙","常德","郴州","衡阳","怀化","吉首","娄底","邵阳","湘潭","益阳","岳阳","永州","张家界","株洲"],"江苏":["南京","常熟","常州","海门","淮安","江都","江阴","昆山","连云港","南通","启东","沭阳","宿迁","苏州","太仓","泰州","同里","无锡","徐州","盐城","扬州","宜兴","仪征","张家港","镇江","周庄"],"江西":["南昌","抚州","赣州","吉安","景德镇","井冈山","九江","庐山","萍乡","上饶","新余","宜春","鹰潭"],"吉林":["长春","白城","白山","珲春","辽源","梅河","吉林","四平","松原","通化","延吉"],"辽宁":["沈阳","鞍山","本溪","朝阳","大连","丹东","抚顺","阜新","葫芦岛","锦州","辽阳","盘锦","铁岭","营口"],"澳门":["澳门"],"内蒙古":["呼和浩特","阿拉善盟","包头","赤峰","东胜","海拉尔","集宁","临河","通辽","乌海","乌兰浩特","锡林浩特"],"宁夏":["银川","固源","石嘴山","吴忠"],"青海":["西宁","德令哈","格尔木","共和","海东","海晏","玛沁","同仁","玉树"],"山东":["济南","滨州","兖州","德州","东营","菏泽","济宁","莱芜","聊城","临沂","蓬莱","青岛","曲阜","日照","泰安","潍坊","威海","烟台","枣庄","淄博"],"山西":["太原","长治","大同","候马","晋城","晋中","离石","临汾","宁武","朔州","忻州","阳泉","榆次","运城"],"陕西":["西安","安康","宝鸡","汉中","渭南","商州","绥德","铜川","咸阳","延安","榆林"],"四川":["成都","巴中","达川","德阳","都江堰","峨眉山","涪陵","广安","广元","九寨沟","康定","乐山","泸州","马尔康","绵阳","眉山","南充","内江","攀枝花","遂宁","汶川","西昌","雅安","宜宾","自贡","资阳"],"台湾":["台北","基隆","台南","台中","高雄","屏东","南投","云林","新竹","彰化","苗栗","嘉义","花莲","桃园","宜兰","台东","金门","马祖","澎湖"],"天津":["和平","东丽","河东","西青","河西","津南","南开","北辰","河北","武清","红挢","塘沽","汉沽","大港","宁河","静海","宝坻","蓟县"],"新疆":["乌鲁木齐","阿克苏","阿勒泰","阿图什","博乐","昌吉","东山","哈密","和田","喀什","克拉玛依","库车","库尔勒","奎屯","石河子","塔城","吐鲁番","伊宁"],"西藏":["拉萨","阿里","昌都","林芝","那曲","日喀则","山南"],"云南":["昆明","大理","保山","楚雄","大理","东川","个旧","景洪","开远","临沧","丽江","六库","潞西","曲靖","思茅","文山","西双版纳","玉溪","中甸","昭通"],"浙江":["杭州","安吉","慈溪","定海","奉化","海盐","黄岩","湖州","嘉兴","金华","临安","临海","丽水","宁波","瓯海","平湖","千岛湖","衢州","江山","瑞安","绍兴","嵊州","台州","温岭","温州","余姚","舟山"],"海外":["欧洲","北美","南美","亚洲","非洲","大洋洲"]},i=function(){var a=$("#province_id"),t=$("#area-list").attr("data-province");a.append("<option value=0>所在省份</option>"),$.each(n,function(t,n){a.append("<option value="+t+">"+t+"</option>")}),a.val(t),o()},o=function(){var a=$("#province_id").val(),t=n[a],i=$("#city_id"),o=$("#area-list").attr("data-city");i.html(""),i.append("<option value='0'>所在城市</option>"),$.each(t,function(a,t){i.append("<option value="+t+">"+t+"</option>")}),i.val(o)};$("#province_id").on("change",function(){var a=$(this);$("#area-list").attr("data-province",a.val()),$("#area-list").attr("data-city",0),o()});var e=function(){i()};e()});;fml.define("page/account/common/job",[],function(a,e){"use strict";var l=[{key:"1",val:"公关"},{key:"2",val:"媒体"},{key:"3",val:"模特"},{key:"4",val:"设计师"},{key:"5",val:"市场/营销"},{key:"6",val:"创意/文案"},{key:"7",val:"广告"},{key:"8",val:"法律"},{key:"9",val:"贸易"},{key:"10",val:"公务员"},{key:"11",val:"教育"},{key:"12",val:"互联网"},{key:"13",val:"计算机"},{key:"14",val:"自由职业"},{key:"15",val:"学生"},{key:"16",val:"非盈利机构"},{key:"17",val:"保险"},{key:"18",val:"财务"},{key:"19",val:"餐饮"},{key:"20",val:"电子/微电子"},{key:"21",val:"翻译"},{key:"22",val:"房地产/建筑"},{key:"23",val:"航空航天"},{key:"24",val:"家电业"},{key:"25",val:"家居/室内设计"},{key:"26",val:"教育/培训"},{key:"27",val:"酒店"},{key:"28",val:"会计"},{key:"29",val:"科研/院校"},{key:"30",val:"快速消费品"},{key:"31",val:"零售"},{key:"32",val:"旅游"},{key:"33",val:"其他"}],v=function(){var a=$("#occupation");a.append("<option value=0>请选择您的职业</option>"),$.each(l,function(e,l){a.append("<option value="+l.val+">"+l.val+"</option>")}),a.val($("#job-list").attr("data-job"))};v()});;fml.define("base",["common/polyfill","common/assert","common/topbar","common/search","common/nav","common/biu","lib/logger","lib/trace","common/user"],function(o,m){"use strict";o("common/polyfill"),o("common/assert"),o("common/topbar"),o("common/search"),o("common/nav"),o("common/biu"),o("lib/logger"),o("lib/trace"),o("common/user")});;