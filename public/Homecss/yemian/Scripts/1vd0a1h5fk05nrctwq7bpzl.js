//# sourceMappingURL=index.js.map
require(["base/MoGu"],function(MoGu){function _switchStatus(e,o){switch(e.model){case"关注":collectPost.addfollow(e.userId,o);break;case"领现金券":collectPost.getCashCoupon(e.proId,o);break;case"领券":collectPost.getShopCoupon(e.proId,e.shopId||"",o);break;case"收藏":collectPost.collectShop(e.shopId,o);break;case"锚点":var t=e.floor,a=$(".mod_row").eq(t).offset().top;$(window,document).scrollTop(a),lock=!0}}var lock=!0,index=0,parentDom;$(".MCUBE_MOD_ID_35").find(".lazyData").length&&$(".MCUBE_MOD_ID_35").find(".lazyData").each(function(){var e=$(this),o=MoGu.ui.getdoT().compile($("#template-tpl").html());e.listenToLazyData(function(t,a,r,c,n){e.find(".margin-block-box").html(o(n)),MoGu&&MoGu.dynamicImage&&MoGu.dynamicImage.checkImages()})}),$(".mod_row").each(function(e,o){var t=$(o),a=t.parents(".module_row")[0];t.data("bgcolor")&&(a.style.background=t.data("bgcolor"))}),$("a.anchor").each(function(index,item){var $self=$(item),_href=decodeURIComponent($self.attr("href")).replace(" ","");if(_href&&/{([,]*\w*\:(\w|[\u4e00-\u9fa5])*)*}/.test(_href)){var _arr=_href.match(/(\w|[\u4e00-\u9fa5])+(?=[,|}])/g),temp=0,matchArr=[];if(_arr&&"object"==typeof _arr&&_arr.length){for(;temp<_arr.length;temp++){var storeStr=_arr[temp];_href=_href.replace(storeStr,'"'+storeStr+'"')}matchArr=_href.match(/{([,]*\w*\:['"]+(\w|[\u4e00-\u9fa5])*['" ]+)*}/);var _json=eval("("+matchArr[0]+")");switch(_json.model){case"领现金券":var scriptDom=document.createElement("script");scriptDom.src="http://shieldironman.mogujie.com/co",document.body.appendChild(scriptDom)}}}}),$(".mod_row").on("click","a.anchor",function(ev){var $self=$(this),_href=decodeURIComponent($self.attr("href")).replace(" ","");if(parentDom=$self.parents(".module_row"),_href&&/{([,]*\w*\:(\w|[\u4e00-\u9fa5])*)*}/.test(_href)&&!$(ev.target).hasClass("anchor_del")){if(!lock)return!1;lock=!1;var _arr=_href.match(/(\w|[\u4e00-\u9fa5])+(?=[,|}])/g),temp=0,matchArr=[];if(_arr&&"object"==typeof _arr&&_arr.length){for(;temp<_arr.length;temp++){var storeStr=_arr[temp];_href=_href.replace(storeStr,'"'+storeStr+'"')}matchArr=_href.match(/{([,]*\w*\:['"]+(\w|[\u4e00-\u9fa5])*['" ]+)*}/);var _json=eval("("+matchArr[0]+")");return _switchStatus(_json,ev),!1}return lock=!0,!0}return lock=!0,!0});var collectPost={getCashCoupon:function(e,o){var t=window._v_pa?window._v_pa:"",a=window._f_pa?window._f_pa:"",r="http://promotion.mogujie.com/jsonp";$.ajax({url:r+"/getPlatformCoupon/1",data:{campId:e,_mgjuuid:MoGu&&MoGu.util&&MoGu.util.getCookie("__mgjuuid"),domain:8,platform:"pc",proba:t,probb:a},type:"GET",dataType:"jsonp"}).then(function(e){var o="";if(e&&e.success&&"SUCCESS"==e.returnCode&&e.data){e.data;o="成功领取"}else if(e&&"SESSION_INVALID"==e.returnCode){var t="http://portal.mogujie.com/user/login?redirect_url="+encodeURIComponent(window.location.href);window.location.href=t,lock=!0}else o=e.message;o&&($.alert(o),lock=!0)})},getShopCoupon:function(e,o,t){var a="http://promotion.mogujie.com/jsonp";$.ajax({url:a+"/getShopCoupon/1",data:{campId:e,shopId:o},type:"GET",dataType:"jsonp"}).then(function(e){var o="";if(e&&e.success&&"SUCCESS"==e.returnCode&&e.data){e.data;o="成功领取"}else if(e&&"SESSION_INVALID"==e.returnCode){var t="http://portal.mogujie.com/user/login?redirect_url="+encodeURIComponent(window.location.href);window.location.href=t,lock=!0}else o=e.message;o&&($.alert(o),lock=!0)})},addfollow:function(e){$.ajax({url:"http://www.mogujie.com/x6/follow/addfollow",data:{uid:e},type:"GET",dataType:"jsonp"}).then(function(e){var o="";switch(e.status.code){case 1001:o="关注成功";break;case 1002:case 1022:lock=!0;var t="http://portal.mogujie.com/user/login?redirect_url="+encodeURIComponent(window.location.href);window.location.href=t;break;case 1003:case 1032:o="关注失败";break;case 1004:o="已关注";break;case 1005:o="操作频繁，请稍后尝试";break;case 4004:o=e.status.msg;break;default:o=e.status.msg}o&&$.alert(o,function(){lock=!0})})},collectShop:function(e){$.ajax({url:"http://www.mogujie.com/x6/shop/"+e+"/collectShop",data:{isCollected:1,noCancel:1},type:"GET",dataType:"jsonp"}).then(function(e){var o="";switch(e.status.code){case 1001:o="收藏成功";break;case 1002:case 1022:lock=!0;var t="http://portal.mogujie.com/user/login?redirect_url="+encodeURIComponent(window.location.href);window.location.href=t;break;case 1003:case 1032:o="收藏失败";break;case 1004:o="已收藏";break;case 1005:o="操作频繁，请稍后尝试";break;case 4004:o=e.status.msg;break;default:o=e.status.msg}o&&$.alert(o,function(){lock=!0})})}}});
//# sourceMappingURL=pc_common_banner_singlebanner/index.js.map
require(["base/MoGu"],function(a){function t(a){var t=a.split("&"),e={};return $(t).each(function(a,t){var i=t.split("=");e[i[0]]=i[1]}),e}function e(a,t){t=t||location.href,t=t.split("#")[0];var e=new RegExp("(^|\\?|&)"+a+"=([^&]*)(\\s|&|$)","i");return e.test(t)?RegExp.$2.replace(/\+/g," "):""}$(document).ready(function(){var a=$(".MCUBE_MOD_ID_69080"),i=$(window),n=a.find(".nav_wrap"),r=a.offset().top-47,o=n.outerHeight();a.height(o);var d=e("property");d?$(".nav_item[data-property = "+d+"]").addClass("active"):$(".nav_item").eq(0).addClass("active");var s=$(".nav_item.active");window.triggerWaterfall?$(document).trigger("waterfall_repaint",{data:$.extend({pid:s.data("pid")},t(s.data("customparam")))}):setTimeout(function(){$(document).trigger("waterfall_repaint",{data:$.extend({pid:s.data("pid")},t(s.data("customparam")))})},1e3),n.on("click",".nav_item",function(){var a=$(this),e=a.data("pid");customparam=a.data("customparam"),a.hasClass("active")||(a.addClass("active").siblings().removeClass("active"),$(document).trigger("waterfall_repaint",{data:$.extend({pid:e},t(customparam))}),window.scrollTo(0,r+42))}),window._updateNavHeight=function(){r=$(".MCUBE_MOD_ID_69080").offset().top-47},i.on("scroll",function(){window._updateNavHeight();var a=i.scrollTop();a>r?n.addClass("nav_fixed"):n.removeClass("nav_fixed")})})});
//# sourceMappingURL=index.js.map
define("wall-item.tpl",[],function(){return'	{{?it.v}}	\n		<div class="item-wrap rec-show-log">\n			<a data-ext-acm="{{=it.v.acm}}" data-log-index="{{= it.index }}" data-log-content="{{= it.v.acm }}" class="item-goods show-log-item" href="{{= it.v.item_url}}">\n				<div class="lazy-load-img img-box">\n					<img src="{{=it.v.image}}">\n					<span class="mark"></span>\n				</div>\n				<div class="sale-info">\n					<div>\n						<span class="price">￥{{= it.v.discountPrice}}</span>\n						<span class="orgin-price">￥{{= it.v.price}}</span>\n					</div>\n					<div class="title">{{=it.v.title}}</div>	\n				</div>\n			</a>\n		</div>\n	{{?}}'}),require(["components/waterfall","wall-item.tpl"],function(a,t){function n(a){var t=a.split("&"),n={};return $(t).each(function(a,t){var i=t.split("=");n[i[0]]=i[1]}),n}var i=$(".MCUBE_MOD_ID_82710"),e=i.find(".sourceKey").val(),l=i.find(".custom-param").val(),c={},o=function(t){waterfall=a.init({el:$(".wall-wrap"),wrapEl:$(".module-wrap").length?$(".module-wrap"):$(window),tmpl:t.itemTpl,url:t.url,data:t.data,dataName:"data.list",metaDataName:"data",colNum:4,colGap:"0 0",onFetchSuccess:function(){waterfall.getParam("rawData").data.isEnd&&waterfall.lock()},onLayoutFinished:function(){MoGu&&MoGu.dynamicImage&&MoGu.dynamicImage.checkImages()}}).start()};c={url:"http://mce.mogucdn.com/jsonp/get/3",data:$.extend({pid:e},n(l)),itemTpl:t},o(c),$(document).on("waterfall_repaint",function(a,t){c=$.extend(c,t),$(".wall-wrap").html(""),waterfall&&waterfall.destroy(),o(c)})});
//# sourceMappingURL=index.js.map
